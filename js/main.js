
let products =  [
    {
        "product_id": 1,
        "name": "Birds of Paradise Pendant",
        "category": "Necklaces",
        "price": 49.99,
        "description": "Elegant gold-plated necklace and earring set with intricate design, perfect for special occasions.",
        "material": "Gold-plated brass",
        "stone_type": "Cubic Zirconia",
        "color": "Gold",
        "image_url":["shopAssets/asset5.jpeg",
        "shopAssets/asset 25.jpeg"],
        "count":0
    },
    {
        "product_id": 2,
        "name": "Circle of Light Heart Earrings",
        "category": "Earrings",
        "price": 129.99,
        "description": "Circle of Light Heart Earrings ring crafted with 14k white gold, a timeless beauty.",
        "material": "14k White Gold",
        "stone_type": "Sapphire, Diamond",
        "color": "Pink",
        "image_url": ["shopAssets/asset 6.jpeg",
        "shopAssets/asset 32.jpeg"],
        "count":0
    },
    {
        "product_id": 3,
        "name": "Pearl Drop Earrings",
        "category": "Earrings",
        "price": 39.99,
        "description": "Classic pearl drop earrings, a symbol of timeless elegance and style.",
        "material": "Sterling Silver, Freshwater Pearls",
        "stone_type": "Freshwater Pearl",
        "color": "Silver",
        "image_url": ["shopAssets/asset 9.jpeg",
        "shopAssets/asset 8.jpeg"],
        "count":0
    },
    {
        "product_id": 4,
        "name": "Echoes Swing word Bracelet",
        "category": "Bracelets",
        "price": 139.00,
        "description": "Echoes Swing word Bracelet, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Pink",
        "image_url": ["shopAssets/asset 26.jpeg",
        "shopAssets/asset 27.jpeg"],
        "count":0
    },
    {
        "product_id": 5,
        "name": "Cross Stripes & Stone Bracelet",
        "category": "Bracelets",
        "price": 169.00,
        "description": "Cross Stripes & Stone Bracelet, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Gold",
        "image_url": ["shopAssets/asset 33.jpeg",
        "shopAssets/asset 34.jpeg"],
        "count":0
    },
    {
        "product_id": 6,
        "name": "Rose Gold Bracelet",
        "category": "Bracelets",
        "price": 25.00,
        "description": "Rose Gold Bracelet, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Pink",
        "image_url": ["shopAssets/asset 35.jpeg",
        "shopAssets/asset 36.jpeg"],
        "count":0
    },
    {
        "product_id": 7,
        "name": "Luxury Rose Pendragon Ring",
        "category": "Rings",
        "price": 49.00,
        "description": "Luxury Rose Pendragon Ring, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Pink",
        "image_url": ["shopAssets/asset 30.jpeg",
        "shopAssets/asset 31.jpeg"],
        "count":0
    },
    {
        "product_id": 8,
        "name": "Kalvesna Diamond Twig Ring",
        "category": "Rings",
        "price": 59.00,
        "description": "Stylish bracelet with Swarovski crystals, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Pink",
        "image_url": ["shopAssets/asset 41.jpeg",
        "shopAssets/asset 42.jpeg"],
        "count":0
    },
    {
        "product_id": 9,
        "name": "Modern Lovepods Pendant",
        "category": "Earrings",
        "price": 77.00,
        "description": "Modern Lovepods Pendant, a symbol of timeless elegance and style.",
        "material": "Sterling Silver, Freshwater Pearls",
        "stone_type": "Freshwater Pearl",
        "color": "Silver",
        "image_url": ["shopAssets/asset 23.jpeg",
        "shopAssets/asset 24.jpeg"],
        "count":0
    },
    {
        "product_id": 10,
        "name": "Classic Plain Stone Bracelet",
        "category": "Bracelets",
        "price": 119.00,
        "description": "Classic Plain Stone Bracelet, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Gold",
        "image_url": ["shopAssets/asset 37.jpeg",
        "shopAssets/asset 38.jpeg"],
        "count":0
    },
    {
        "product_id": 11,
        "name": "Pandora Flower Stem Earrings",
        "category": "Earrings",
        "price": 139.00,
        "description": "Pandora Flower Stem Earrings, a symbol of timeless elegance and style.",
        "material": "Sterling Silver, Freshwater Pearls",
        "stone_type": "Freshwater Pearl",
        "color": "Silver",
        "image_url": ["shopAssets/asset 39.jpeg",
        "shopAssets/asset 40.jpeg"],
        "count":0
    },
    {
        "product_id": 12,
        "name": "Pearl Drop Earrings",
        "category": "Earrings",
        "price": 39.99,
        "description": "Classic pearl drop earrings, a symbol of timeless elegance and style.",
        "material": "Sterling Silver, Freshwater Pearls",
        "stone_type": "Freshwater Pearl",
        "color": "Silver",
        "image_url": ["shopAssets/asset 21.jpeg",
        "shopAssets/asset 22.jpeg"],
        "count":0
    },
    {
        "product_id": 13,
        "name": "Pearl Drop Earrings",
        "category": "Earrings",
        "price": 39.99,
        "description": "Classic pearl drop earrings, a symbol of timeless elegance and style.",
        "material": "Sterling Silver, Freshwater Pearls",
        "stone_type": "Freshwater Pearl",
        "color": "Gold",
        "image_url": ["shopAssets/asset 7.jpeg",
        "shopAssets/asset 8.jpeg"],
        "count":0
    },
    {
        "product_id": 14,
        "name": "Echoes Necklace Extension Piece",
        "category": "Bracelets",
        "price": 199.00,
        "description": "Echoes Necklace Extension Piece, a perfect accessory for any outfit.",
        "material": "Rhodium-Plated Alloy",
        "stone_type": "Swarovski Crystal",
        "color": "Gold",
        "image_url": ["shopAssets/asset 28.jpeg",
        "shopAssets/asset 29.jpeg"],
        "count":0
    }
]

let row = document.getElementById('items')
let btns = document.querySelectorAll('.categ-btn')
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let wish = JSON.parse(localStorage.getItem("wish")) || [];
let btnHide = document.getElementById('btnScroll')
let pop =document.getElementById('pop')





btnHide.addEventListener("click", function () {
    window.scroll({
        top: 0,
        behavior:"smooth"
    })
})

window.onscroll=function(){
    if(window.scrollY>150){
        btnHide.classList.add("topShow")
    }
    else{
        btnHide.classList.remove('topShow')
    }
}

showProducts()

btns.forEach(btn =>{
    btn.addEventListener('click', ()=>{
        row.innerHTML = " ";
        products.forEach( product=>{
            const {name, image_url,category,price,product_id} = product;
            if(category === btn.innerHTML){
                let divv = document.createElement('div')
            divv.classList.add('col-lg-3','col-md-4','col-sm-6')
            divv.innerHTML = `
            <div class="p-3" onclick="popUp(${product_id})">
                <div class="img-hover">
                    <img src="${image_url[0]}" alt="">
                    <img class="hover-img" src="${image_url[1]}" alt="">
                    <div class="overlay hover-img">
                        <button href="" class="heart" onclick="addWish(${product_id})"><i class="fa-regular fa-heart"></i></button>
                        <button href=""><i class="fa-solid fa-magnifying-glass"></i></button>
                    </div>
                </div>
                <div class="text">
                    <p class="text-center">
                        ${name}
                    </p>
                    <p class="text-center">
                        $${price}  
                    </p>
                    <div class="text-center"><button href="" class="shop-now d-inline">add to cart</button></div>
                </div>
            </div>
            `
            row.append(divv)}
            }
        )
    })
})


function popUp(id){
    console.log('hellor')
    for(let i=0;i<products.length;i++){
        if(id === products[i].product_id){
            pop.classList.toggle('popShow')
            let popItem = document.createElement('div')
            popItem.innerHTML=`
            
                    <img src="${products[i].image_url[0]}" alt="">
    
                    
            `
            pop.appendChild(popItem)
        }
    }
}

function search(item){
    row.innerHTML="";
    let items = "";
    for(let i=0;i<products.length;i++){
        if(products[i].name.trim().toLowerCase().includes(item.trim().toLowerCase())){
            
            items+=`
                <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="p-3">
                    <div class="img-hover">
                        <img src="${products[i].image_url[0]}" alt="">
                        <img class="hover-img" src="${products[i].image_url[1]}" alt="">
                        <div class="overlay hover-img">
                            <button href="" class="heart" onclick="addWish(${products[i].product_id})"><i class="fa-regular fa-heart"></i></button>
                            <button href=""><i class="fa-solid fa-magnifying-glass"></i></button>
                        </div>
                    </div>
                    <div class="text d-flex flex-column justify-content-center">
                        <p class="text-center">
                            ${products[i].name}
                        </p>
                        <p class="text-center">
                            $${products[i].price}  
                        </p>
                        <div class="text-center"><button onclick="addCart(${products[i].product_id})" class="shop-now d-inline">add to cart</button></div>
                    </div>
                </div>
                </div>
            `
        }
    }
    row.innerHTML = items;
}

function showProducts(){
    products.forEach( product=>{
        const {name, image_url,category,price,product_id} = product;
        console.log(name)
        var divv = document.createElement('div')
        divv.classList.add('col-lg-3','col-md-4','col-sm-6')
        divv.innerHTML = `
        <div class="p-3">
            <div class="img-hover">
                <img src="${image_url[0]}" alt="">
                <img class="hover-img" src="${image_url[1]}" alt="">
                <div class="overlay hover-img">
                    <button href="" class="heart" onclick="addWish(${product_id})"><i class="fa-regular fa-heart"></i></button>
                    <button href=""><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
            </div>
            <div class="text d-flex flex-column justify-content-center">
                <p class="text-center">
                    ${name}
                </p>
                <p class="text-center">
                    $${price}  
                </p>
                <div class="text-center"><button onclick="addCart(${product_id})" class="shop-now d-inline">add to cart</button></div>
            </div>
        </div>
        `
        row.append(divv)
    })
}
function addCart(index){
    console.log(index)
    index-=1
    let choosenProdect = products[index];
    let findedProduct = cart.find((item) =>  item.product_id === choosenProdect.product_id );
    if (findedProduct) {
        findedProduct.count+=1
    }
    else {
        cart.push(choosenProdect);
    }
    localStorage.setItem("cart", JSON.stringify(cart));
}

function addWish(index){
    index-=1
    let choosenProdect = products[index];
    let findedProduct = cart.find((item) =>  item.product_id === choosenProdect.product_id );
    if (findedProduct) {
        findedProduct.count+=1
    }
    else {
        wish.push(choosenProdect);
    }
    localStorage.setItem("wish", JSON.stringify(wish));
}



